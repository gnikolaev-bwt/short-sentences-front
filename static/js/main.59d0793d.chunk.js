(this["webpackJsonpshort-sentences"]=this["webpackJsonpshort-sentences"]||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(23),r=a.n(n),s=(a(82),a(140)),i=a(139),l=a(25),j=a(8),o=a(12),d=a(138),u=a(72),b=a(73),h=a(141),O=a(143),x=a(39),m=a(137),p=a(142),f=a(29),g=a(41),v=a.n(g),N=a(54),_=a(28),S=a(55),w=a.n(S),P=w.a.create({baseURL:"https://".concat("amazon23.p.rapidapi.com"),headers:{"x-rapidapi-host":"amazon23.p.rapidapi.com","x-rapidapi-key":"ecd72b8709msh07f4cd4e5a0c83fp1bfae3jsncf9c29afc457"}}),k=w.a.create({baseURL:"localhost"===window.location.hostname?"http://192.168.0.75:90":"https://95.170.154.243:90"}),y=function e(){Object(_.a)(this,e)};y.getProductClusters=function(){var e=Object(N.a)(v.a.mark((function e(t,a){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request started"),e.prev=1,e.next=4,k.get("/process",{params:{asin:t,language:a}});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),y.getProductDetails=function(){var e=Object(N.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.get("/product-details",{params:{asin:t,country:"US"}});case 2:return a=e.sent,e.abrupt("return",a.data.result[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var D,B=a(31),C=B.c,z=a(24),E=a(3),R=a(37),T=Object(R.b)({name:"products",initialState:{popularProductsDetails:null},reducers:{setPopularProductsDetails:function(e,t){e.popularProductsDetails=t.payload}}}),H=Object(R.a)({reducer:{products:T.reducer}}),A=Object(E.a)({},T.actions),F=[{asin:"B096BKFG57",lang:"En"},{asin:"B01MQWUXZS",lang:"En"},{asin:"B01K9S260E",lang:"En"}],W=function(e,t){var a=null!==t&&void 0!==t?t:12;return e.split(" ").length>a?e.split(" ").slice(0,a).join(" ")+"...":e},I=function(e,t){var a=null!==t&&void 0!==t?t:30;return e.length>a?e.slice(0,a)+"...":e},L=a(2),U=function(e){var t=e.children;return Object(L.jsx)("div",{className:"w-100 h-100 d-flex flex-column align-items-center my-5",children:t})},G=function(e){var t=e.src,a=e.height,c=e.bgSize;return Object(L.jsx)("div",{style:{height:null!==a&&void 0!==a?a:"15rem",background:t?"url(".concat(t,") no-repeat center"):"#2b2b2b",backgroundSize:t?null!==c&&void 0!==c?c:"50%":"100%"}})},V=a(5),J=a.n(V),M=a(35),Z=a.n(M),q=function(e){var t=e.rating,a=parseFloat(t);return Object(L.jsxs)("div",{className:"d-flex align-items-center",children:[Array.from({length:5}).map((function(e,t){return t<a?Object(L.jsx)("div",{className:J()(Z.a.starWrapper,Z.a.filled),children:Object(L.jsx)(x.a,{})},t):Object(L.jsx)("div",{className:Z.a.starWrapper,children:Object(L.jsx)(x.b,{})},t)})),Object(L.jsx)("div",{className:Z.a.ratingWrapper,children:Object(L.jsx)("div",{className:Z.a.rating,children:t})})]})},K=a(56),X=a.n(K),Y=function(){var e=C((function(e){return e.products})).popularProductsDetails,t=function(){var e=Object(B.b)();return Object(z.b)(A,e)}().setPopularProductsDetails;return Object(c.useEffect)((function(){if(!e){var a=F.map((function(e){var t=e.asin;return y.getProductDetails(t)}));Promise.all(a).then((function(e){return t(e)}))}}),[e,t]),Object(L.jsx)(m.a,{className:X.a.cardGroup,children:e?e.slice(0,3).map((function(e,t){var a=de(D.ProductDetails,{asin:F[t].asin,lang:F[t].lang});return Object(L.jsxs)(p.a,{className:X.a.card,as:l.b,to:a,children:[Object(L.jsx)(G,{src:e.main_image,height:"15rem",bgSize:"25%"}),Object(L.jsx)(p.a.Body,{children:Object(L.jsx)(p.a.Title,{children:W(e.title,20)})}),Object(L.jsx)(p.a.Footer,{children:Object(L.jsxs)("small",{className:"text-muted",children:["Most popular ",Object(L.jsx)(x.b,{})]})})]},t)})):Object(L.jsx)(f.HashLoader,{})})},Q=function(e){var t=e.details;return Object(L.jsx)(p.a,{children:t?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(G,{src:t.main_image,height:"15rem",bgSize:"50%"}),Object(L.jsxs)(p.a.Body,{children:[Object(L.jsx)(p.a.Title,{children:t.title}),Object(L.jsx)("hr",{}),Object(L.jsx)("div",{className:"my-3",children:Object(L.jsx)(q,{rating:t.reviews.rating})}),t.description&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("hr",{}),Object(L.jsx)(p.a.Text,{children:I(t.description,100)})]}),Object(L.jsx)("hr",{}),Object(L.jsx)(O.a,{as:"a",className:"w-100",variant:"outline-dark",href:t.url,target:"_blank",children:"Open in Amazon store"})]})]}):Object(L.jsx)(U,{children:Object(L.jsx)(f.ScaleLoader,{})})})},$=a(9),ee=a(77),te=a(49),ae=a(71),ce=a(42),ne=a.n(ce),re=function(e){var t=e.cluster,a=Object(c.useState)(!1),n=Object(j.a)(a,2),r=n[0],s=n[1],i=J()(ne.a.card,Object($.a)({},ne.a.focused,r));return Object(L.jsxs)(p.a,{className:i,children:[Object(L.jsxs)("div",{className:ne.a.cardHeader,onClick:function(){return s((function(e){return!e}))},children:[Object(L.jsxs)("div",{className:"flex-grow-1",children:[Object(L.jsx)(p.a.Title,{children:t.group}),Object(L.jsx)(p.a.Text,{children:t.cluster_description})]}),Object(L.jsxs)("div",{className:"d-flex align-items-center mx-2",children:[Object(L.jsx)(te.c,{className:"me-1"}),Object(L.jsx)("span",{className:"lead",children:t.statements})]}),Object(L.jsx)("div",{className:"d-flex align-items-center mx-3",children:r?Object(L.jsx)(te.a,{}):Object(L.jsx)(te.b,{})})]}),Object(L.jsx)(ee.a,{in:r,children:Object(L.jsxs)("div",{children:[Object(L.jsx)("hr",{className:ne.a.hr}),t.sentences.map((function(e,t){return Object(L.jsxs)("div",{children:[Object(L.jsx)(ae.a,{}),Object(L.jsx)("span",{className:"ms-1",children:e})]},t)})),Object(L.jsx)(O.a,{variant:"light",className:"w-100 mt-3",children:"View all"})]})})]})},se=function(e){var t=e.clusters;return Object(L.jsxs)("div",{className:"rounded-3 border p-4",children:[Object(L.jsx)("h4",{children:"Review Summary"}),Object(L.jsx)("div",{className:"mt-3",children:t?t.length?t.map((function(e,t){return Object(L.jsx)(re,{cluster:e},t)})):Object(L.jsx)("span",{children:"No reviews found for this product"}):Object(L.jsxs)(U,{children:[Object(L.jsx)(f.ClockLoader,{}),Object(L.jsx)("div",{className:"mt-2",children:"Please, wait a few seconds"})]})})]})},ie=function(e){var t=e.details,a=Object(c.useState)(!1),n=Object(j.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(4),o=Object(j.a)(i,2),b=o[0],h=o[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(d.a,{className:"mt-4",children:Object(L.jsx)("hr",{})}),Object(L.jsx)(d.a,{className:"mt-2",children:Object(L.jsx)("h3",{children:"You'd may also like to see:"})}),Object(L.jsx)(d.a,{children:t.variants.filter((function(e){return!e.is_current_product})).slice(0,b).map((function(e,t){var a,c=de(D.ProductDetails,{asin:e.asin,lang:"En"});return Object(L.jsx)(u.a,{md:3,className:"mt-3",children:Object(L.jsxs)(p.a,{as:l.b,className:"h-100",to:c,children:[Object(L.jsx)(G,{src:null===(a=e.images)||void 0===a?void 0:a[0].large,bgSize:"40%"}),Object(L.jsx)(p.a.Body,{children:Object(L.jsx)(p.a.Title,{children:e.title})})]})},t)}))}),t.variants.length>4&&Object(L.jsx)(d.a,{className:"justify-content-center mt-3",children:Object(L.jsx)(u.a,{md:6,children:Object(L.jsx)(O.a,{variant:"outline-dark",className:"w-100",onClick:function(){h(r?4:t.variants.length),s(!r)},children:r?"Hide":"Show more"})})})]})},le=a(50),je=a.n(le);!function(e){e.Home="/",e.ProductDetails="/:asin/:lang"}(D||(D={}));var oe=[{path:D.Home,component:function(){var e=Object(o.f)(),t=Object(c.useState)(""),a=Object(j.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),l=Object(j.a)(s,2),x=l[0],m=l[1],p=Object(c.useState)("En"),f=Object(j.a)(p,2),g=f[0],v=f[1],N=function(e){var t=function(e){var t=new RegExp("B[0-9]{2}[0-9A-Z]{7}|[0-9]{9}(X|0-9])").exec(e);return t?null===t||void 0===t?void 0:t[0]:null}(e);t?(m(""),r(t)):m("Incorrect Amazon product URL or ASIN")};return Object(L.jsxs)(i.a,{className:je.a.container,children:[Object(L.jsx)(d.a,{className:"g-2",children:Object(L.jsx)(u.a,{md:12,children:Object(L.jsx)("h2",{children:"Review Summarizer"})})}),Object(L.jsx)("form",{onSubmit:function(t){if(t.preventDefault(),n){var a=de(D.ProductDetails,{asin:n,lang:g});e.push(a)}else m("This is a required field")},autoComplete:"off",children:Object(L.jsxs)(d.a,{className:"g-2 mt-2",children:[Object(L.jsx)(u.a,{md:6,lg:8,children:Object(L.jsxs)(b.a,{controlId:"asin",label:"Amazon URL or ASIN",children:[Object(L.jsx)(h.a.Control,{placeholder:"https://amazon.com",onChange:function(e){return N(e.target.value)},isInvalid:!!x}),Object(L.jsx)(h.a.Control.Feedback,{className:je.a.invalidTooltip,type:"invalid",children:x})]})}),Object(L.jsx)(u.a,{md:3,lg:2,children:Object(L.jsx)(b.a,{label:"Select language",children:Object(L.jsx)(h.a.Control,{as:"select",className:je.a.select,onChange:function(e){return v(e.target.value)},children:Object(L.jsx)("option",{value:"En",children:"En"})})})}),Object(L.jsx)(u.a,{md:3,lg:2,children:Object(L.jsx)(O.a,{type:"submit",variant:"primary",className:"w-100 h-100",children:"Summarize"})})]})}),Object(L.jsx)(Y,{})]})}},{path:D.ProductDetails,component:function(e){var t=e.match.params,a=t.asin,n=t.lang,r=Object(c.useState)(null),s=Object(j.a)(r,2),l=s[0],o=s[1],b=Object(c.useState)(null),h=Object(j.a)(b,2),O=h[0],x=h[1];return Object(c.useEffect)((function(){o(null),x(null),y.getProductDetails(a).then((function(e){o(e)})),y.getProductClusters(a,n).then((function(e){x(e)}))}),[a,n]),Object(L.jsxs)(i.a,{className:"pb-5",children:[Object(L.jsxs)(d.a,{className:"g-4 mt-3",children:[Object(L.jsx)(u.a,{md:5,lg:3,children:Object(L.jsx)(Q,{details:l})}),Object(L.jsx)(u.a,{md:7,lg:9,children:Object(L.jsx)(se,{clusters:O})})]}),l&&!!l.variants.length&&Object(L.jsx)(ie,{details:l})]})}}],de=function(e,t){return Object.entries(t).reduce((function(e,t){var a=Object(j.a)(t,2),c=a[0],n=a[1];return e.replace(":".concat(c),n)}),e)},ue=function(){return Object(L.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",children:Object(L.jsxs)(i.a,{children:[Object(L.jsx)(s.a.Brand,{as:l.b,to:D.Home,children:"Short Sentences"}),Object(L.jsx)(s.a.Toggle,{}),Object(L.jsx)(s.a.Collapse,{className:"justify-content-end",children:Object(L.jsxs)(s.a.Text,{children:["Using public ",Object(L.jsx)("b",{children:"Amazon API"})]})})]})})},be=function(e){var t=e.children;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ue,{}),t]})},he=function(){return Object(L.jsx)(l.a,{basename:"/",children:Object(L.jsx)(o.c,{children:oe.map((function(e,t){return Object(L.jsx)(o.a,{exact:!0,path:e.path,render:function(t){return Object(L.jsx)(be,{children:Object(L.jsx)(e.component,Object(E.a)({},t))})}},t)}))})})};r.a.render(Object(L.jsx)(B.a,{store:H,children:Object(L.jsx)(he,{})}),document.getElementById("root"))},35:function(e,t,a){e.exports={starWrapper:"RatingBlock_starWrapper__3g6mB",filled:"RatingBlock_filled__1EPlk",ratingWrapper:"RatingBlock_ratingWrapper__2DfNs",rating:"RatingBlock_rating__3Vf8B"}},42:function(e,t,a){e.exports={card:"ClusterDetails_card__2rJ2E",cardHeader:"ClusterDetails_cardHeader__39RZa",focused:"ClusterDetails_focused__2gfxo"}},50:function(e,t,a){e.exports={container:"Home_container__2mBc-",select:"Home_select__3upMm",invalidTooltip:"Home_invalidTooltip__2VyY-"}},56:function(e,t,a){e.exports={cardGroup:"PopularProducuts_cardGroup__wd_bo",card:"PopularProducuts_card__29wVf"}},82:function(e,t,a){}},[[135,1,2]]]);
//# sourceMappingURL=main.59d0793d.chunk.js.map