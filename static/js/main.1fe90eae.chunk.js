(this["webpackJsonpshort-sentences"]=this["webpackJsonpshort-sentences"]||[]).push([[0],{141:function(e,t,r){"use strict";r.r(t);var c=r(1),a=r(24),n=r.n(a),s=(r(89),r(147)),i=r(146),u=r(31),l=r(9),o=r(14),d=r.n(o),j=r(25),b=r(12),h=r(40),p=function(e,t){var r=null!==t&&void 0!==t?t:12;return e.split(" ").length>r?e.split(" ").slice(0,r).join(" ")+"...":e},O=function(e,t){var r=null!==t&&void 0!==t?t:30;return e.length>r?e.slice(0,r)+"...":e},x=function(e){var t=new RegExp("B[0-9]{2}[0-9A-Z]{7}|[0-9]{9}(X|0-9])").exec(e);return t?null===t||void 0===t?void 0:t[0]:null},f=function(e){var t=new Date(0);return t.setSeconds(e),t.toISOString().substr(14,5)},m=r(41),g=m.c,v=r(29),y=r(3),N=r(26),P=r(8),S=r(37),_=r(46),w=r.n(_),k="localhost"===window.location.hostname,L=w.a.create({baseURL:"https://".concat("amazon23.p.rapidapi.com"),headers:{"x-rapidapi-host":"amazon23.p.rapidapi.com","x-rapidapi-key":"ecd72b8709msh07f4cd4e5a0c83fp1bfae3jsncf9c29afc457"}}),D=w.a.create({baseURL:k?"http://192.168.0.75":"https://short-sentences.xyz"}),E=function e(){Object(S.a)(this,e)};E.getProductDetails=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-details",params:{asin:t,country:"US"}},e.next=3,L.request(r);case 3:return c=e.sent,e.abrupt("return",c.data.result[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E.searchForProduct=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-search",params:{query:t,country:"US"}},e.next=3,L.request(r);case 3:return c=e.sent,e.abrupt("return",c.data.result);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E.getProductClusters=function(){var e=Object(j.a)(d.a.mark((function e(t,r,c){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",url:"/process",cancelToken:t},e.next=3,D.request(a);case 3:if("OK"===(n=e.sent).data.status){e.next=6;break}throw Error(n.data.error);case 6:return e.abrupt("return",n.data.data);case 7:case"end":return e.stop()}}),e)})));return function(t,r,c){return e.apply(this,arguments)}}();var C,B,T,z=[{asin:"B096BKFG57",lang:"En"},{asin:"B07G853D6N",lang:"En"},{asin:"B01K9S260E",lang:"En"}],R=Object(N.b)("productList/fetchPopularProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,a=z.map((function(e){return E.getProductDetails(e.asin)})),e.next=5,Promise.all(a);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().productList.popularProducts.length}}),F=Object(N.b)("productList/searchForProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,e.next=4,E.searchForProduct(t.query);case 4:return a=e.sent,e.abrupt("return",{query:t.query,products:a});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return(0,t.getState)().productList.lastQuery!==e.query}}),H={fetchPopularProducts:R,searchForProducts:F},I=Object(N.c)({name:"productList",initialState:{popularProducts:[],foundProducts:[],lastQuery:null,isPopularLoading:!1,isSearchLoading:!1,popularError:"",searchError:""},reducers:{},extraReducers:(C={},Object(P.a)(C,R.pending.type,(function(e){e.isPopularLoading=!0})),Object(P.a)(C,R.fulfilled.type,(function(e,t){e.popularProducts=t.payload,e.isPopularLoading=!1})),Object(P.a)(C,F.pending.type,(function(e){e.isSearchLoading=!0})),Object(P.a)(C,F.fulfilled.type,(function(e,t){e.foundProducts=t.payload.products,e.lastQuery=t.payload.query,e.isSearchLoading=!1})),C)}).reducer,W=Object(N.b)("productDetails/fetchProductDetails",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,e.next=4,E.getProductDetails(t.asin);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()),q=Object(N.b)("productDetails/fetchProductClusters",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,a=t.cancelToken,n=t.asin,s=t.lang,e.next=5,E.getProductClusters(a,n,s);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),G={fetchProductDetails:W,fetchProductClusters:q},V=Object(N.c)({name:"productDetails",initialState:{productDetails:null,productClusters:[],isDetailsLoading:!1,isClustersLoading:!1,detailsError:"",clustersError:""},reducers:{},extraReducers:(B={},Object(P.a)(B,W.pending.type,(function(e){e.isDetailsLoading=!0})),Object(P.a)(B,W.fulfilled.type,(function(e,t){e.productDetails=t.payload,e.isDetailsLoading=!1,e.detailsError=""})),Object(P.a)(B,W.rejected.type,(function(e,t){e.isDetailsLoading=!1,e.detailsError=t.payload})),Object(P.a)(B,q.pending.type,(function(e){e.isClustersLoading=!0})),Object(P.a)(B,q.fulfilled.type,(function(e,t){e.productClusters=t.payload,e.isClustersLoading=!1,e.clustersError=""})),Object(P.a)(B,q.rejected.type,(function(e,t){e.isClustersLoading=!1,e.clustersError=t.payload})),B)}).reducer,A=Object(N.a)({reducer:{productList:I,productDetails:V}}),U=Object(y.a)(Object(y.a)({},H),G),J=function(){var e=Object(m.b)();return Object(v.b)(U,e)},K=r(36),M=r(150),Q=r(143),Y=r(2),Z=function(e){var t=e.children;return Object(Y.jsx)("div",{className:"w-100 h-100 p-5",children:Object(Y.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:t})})},X=function(e){var t=e.src,r=e.height,c=e.bgSize;return Object(Y.jsx)("div",{style:{height:null!==r&&void 0!==r?r:"15rem",backgroundImage:t?"url(".concat(t,")"):"none",backgroundColor:t?"none":"#2b2b2b",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:t?null!==c&&void 0!==c?c:"50%":"100%"}})},$=r(47),ee=r(4),te=r.n(ee),re=r(43),ce=r.n(re),ae=function(e){var t=e.rating,r=parseFloat(t);return Object(Y.jsxs)("div",{className:"d-flex align-items-center",children:[Array.from({length:5}).map((function(e,t){return t<r?Object(Y.jsx)("div",{className:te()(ce.a.starWrapper,ce.a.filled),children:Object(Y.jsx)($.a,{})},t):Object(Y.jsx)("div",{className:ce.a.starWrapper,children:Object(Y.jsx)($.b,{})},t)})),Object(Y.jsx)("div",{className:ce.a.ratingWrapper,children:Object(Y.jsx)("div",{className:ce.a.rating,children:t})})]})},ne=r(148),se=function(e){var t=e.images,r=e.height,c=e.bgSize;return t.length>1?Object(Y.jsx)(ne.a,{interval:null,variant:"dark",children:t.map((function(e,t){return Object(Y.jsx)(ne.a.Item,{children:Object(Y.jsx)(X,{src:e,height:r,bgSize:c})},t)}))}):Object(Y.jsx)(X,{src:t[0],height:r,bgSize:c})},ie=function(e){var t=e.details,r=e.isLoading,c=e.error;return Object(Y.jsx)(M.a,{children:r?Object(Y.jsx)(Z,{children:Object(Y.jsx)(h.ScaleLoader,{})}):c||!t?Object(Y.jsxs)(Z,{children:[Object(Y.jsx)(K.b,{size:"3rem"}),Object(Y.jsx)("div",{className:"mt-2",children:"Some error occured on product load."})]}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(se,{images:t.images,height:"17rem",bgSize:"60%"}),Object(Y.jsxs)(M.a.Body,{children:[Object(Y.jsx)(M.a.Title,{children:t.title}),Object(Y.jsx)("hr",{}),Object(Y.jsx)("div",{className:"my-3",children:Object(Y.jsx)(ae,{rating:t.reviews.rating})}),t.description&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("hr",{}),Object(Y.jsx)(M.a.Text,{children:O(t.description,100)})]}),Object(Y.jsx)("hr",{}),Object(Y.jsx)(Q.a,{as:"a",className:"w-100",variant:"outline-dark",href:t.url,target:"_blank",children:"Open in Amazon store"})]})]})})},ue=r(84),le=r(59),oe=r(44),de=r.n(oe),je=function(e){var t=e.cluster,r=Object(c.useState)(!1),a=Object(l.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(!1),u=Object(l.a)(i,2),o=u[0],d=u[1],j=o?t.sentences.length:5;return Object(Y.jsxs)(M.a,{className:te()(de.a.card,Object(P.a)({},de.a.focused,n)),children:[Object(Y.jsxs)("div",{className:de.a.cardHeader,onClick:function(){return s((function(e){return!e}))},children:[Object(Y.jsxs)("div",{className:"flex-grow-1",children:[Object(Y.jsx)(M.a.Title,{children:t["cluster description"][0]}),Object(Y.jsx)(M.a.Text,{children:t["cluster description"][1]})]}),Object(Y.jsxs)("div",{className:"d-flex align-items-center mx-2",children:[Object(Y.jsx)(le.c,{className:"me-1"}),Object(Y.jsx)("span",{className:"lead",children:t.statements})]}),Object(Y.jsx)("div",{className:"d-flex align-items-center mx-3",children:n?Object(Y.jsx)(le.a,{}):Object(Y.jsx)(le.b,{})})]}),Object(Y.jsx)(ue.a,{in:n,children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)("hr",{className:de.a.hr}),t.sentences.slice(0,j).map((function(e,t){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(K.a,{}),Object(Y.jsx)("span",{className:"ms-2",children:e})]},t)})),Object(Y.jsx)("hr",{className:de.a.hr}),Object(Y.jsx)(Q.a,{variant:"light",className:"w-100",onClick:function(){return d((function(e){return!e}))},children:o?"Hide":"Expand reviews"})]})})]})},be=function(e){var t=e.asin,r=e.src,c=e.title,a=e.rating,n=De(T.ProductDetails,{asin:t,lang:"En"});return Object(Y.jsxs)(M.a,{as:u.b,className:"h-100",to:n,children:[Object(Y.jsx)(X,{src:r,height:"10rem",bgSize:"40%"}),Object(Y.jsxs)(M.a.Body,{children:[Object(Y.jsx)(M.a.Title,{children:c}),a&&Object(Y.jsx)(ae,{rating:"".concat(a)})]})]})},he=function(e){var t=e.clusters,r=e.isLoading,a=e.error,n=Object(c.useState)(0),s=Object(l.a)(n,2),i=s[0],u=s[1];return Object(c.useEffect)((function(){if(r){u(0);var e=setInterval((function(){u((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}}),[r]),Object(Y.jsxs)("div",{className:"rounded-3 border p-4",children:[Object(Y.jsx)("h4",{children:"Review Summary"}),Object(Y.jsx)("hr",{className:"my-4"}),Object(Y.jsx)("div",{children:r?Object(Y.jsxs)(Z,{children:[Object(Y.jsx)(h.ClockLoader,{}),Object(Y.jsx)("div",{className:"mt-2",children:"It takes about 1 minute to load reviews"}),Object(Y.jsxs)("div",{className:"mt-1",children:["Time passed: ",f(i)]})]}):a?Object(Y.jsxs)(Z,{children:[Object(Y.jsx)(K.b,{size:"3rem"}),Object(Y.jsx)("div",{className:"mt-2",children:"Some error occured on reviews load."})]}):t.length?t.map((function(e,t){return Object(Y.jsx)(je,{cluster:e},t)})):Object(Y.jsxs)(Z,{children:[Object(Y.jsx)(K.b,{size:"3rem"}),Object(Y.jsx)("div",{className:"mt-2",children:"No reviews found for this product."})]})})]})},pe=r(144),Oe=r(81),xe=function(e){var t=e.details,r=Object(c.useState)(!1),a=Object(l.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(4),u=Object(l.a)(i,2),o=u[0],d=u[1];return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(pe.a,{className:"mt-4",children:Object(Y.jsx)("hr",{})}),Object(Y.jsx)(pe.a,{className:"mt-2",children:Object(Y.jsx)("h3",{children:"You'd may also like to see:"})}),Object(Y.jsx)(pe.a,{children:t.variants.filter((function(e){return!e.is_current_product})).slice(0,o).map((function(e,t){var r;return Object(Y.jsx)(Oe.a,{md:3,className:"mt-3",children:Object(Y.jsx)(be,{asin:e.asin,src:null===(r=e.images[0])||void 0===r?void 0:r.large,title:e.title})},t)}))}),t.variants.length>4&&Object(Y.jsx)(pe.a,{className:"justify-content-center mt-3",children:Object(Y.jsx)(Oe.a,{md:6,children:Object(Y.jsx)(Q.a,{variant:"outline-dark",className:"w-100",onClick:function(){d(n?4:t.variants.length),s(!n)},children:n?"Hide":"Show more"})})})]})},fe=r(145),me=r(64),ge=r.n(me),ve=function(e){var t=e.popularProducts;return Object(Y.jsx)(fe.a,{className:ge.a.cardGroup,children:t.slice(0,3).map((function(e,t){var r=De(T.ProductDetails,{asin:z[t].asin,lang:z[t].lang});return Object(Y.jsxs)(M.a,{className:ge.a.card,as:u.b,to:r,children:[Object(Y.jsx)(X,{src:e.main_image,height:"15rem",bgSize:"25%"}),Object(Y.jsx)(M.a.Body,{children:Object(Y.jsx)(M.a.Title,{children:p(e.title,20)})}),Object(Y.jsx)(M.a.Footer,{children:Object(Y.jsxs)("small",{className:"text-muted",children:["Most popular ",Object(Y.jsx)($.b,{})]})})]},t)}))})},ye=r(82),Ne=r.n(ye),Pe=function(e){var t=e.foundProducts;return Object(Y.jsx)(pe.a,{className:Ne.a.searchRow,children:t.slice(0,12).map((function(e,t){return Object(Y.jsx)(Oe.a,{md:3,className:"mt-3",children:Object(Y.jsx)(be,{asin:e.asin,src:e.thumbnail,title:e.title,rating:e.reviews.rating})},t)}))})},Se=r(65),_e=r.n(Se),we=r(83),ke=r(149);!function(e){e.Home="/",e.ProductDetails="/:asin/:lang"}(T||(T={}));var Le=[{path:T.Home,component:function(){var e=Object(b.f)(),t=Object(c.useState)(""),r=Object(l.a)(t,2),a=r[0],n=r[1],s=Object(c.useState)("En"),u=Object(l.a)(s,2),o=u[0],p=u[1],O=Object(c.useState)(!0),f=Object(l.a)(O,2),m=f[0],v=f[1],y=g((function(e){return e.productList})),N=y.popularProducts,P=y.foundProducts,S=y.isPopularLoading,_=y.isSearchLoading,w=J(),k=w.fetchPopularProducts,L=w.searchForProducts;Object(c.useEffect)((function(){k()}),[]);var D=function(){var t=Object(j.a)(d.a.mark((function t(r){var c,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),(c=x(a))?(n=De(T.ProductDetails,{asin:c,lang:o}),e.push(n)):a?(v(!1),L({query:a})):(v(!0),k());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Y.jsxs)(i.a,{className:_e.a.container,children:[Object(Y.jsx)(pe.a,{className:"g-2",children:Object(Y.jsx)(Oe.a,{md:12,children:Object(Y.jsx)("h2",{children:"Search for product"})})}),Object(Y.jsx)("form",{onSubmit:D,autoComplete:"off",children:Object(Y.jsxs)(pe.a,{className:"g-2 mt-2",children:[Object(Y.jsx)(Oe.a,{md:6,lg:8,children:Object(Y.jsx)(we.a,{controlId:"asin",label:"Product name or asin",children:Object(Y.jsx)(ke.a.Control,{placeholder:"...",onChange:function(e){return n(e.target.value)}})})}),Object(Y.jsx)(Oe.a,{md:3,lg:2,children:Object(Y.jsx)(we.a,{label:"Select language",children:Object(Y.jsx)(ke.a.Control,{as:"select",className:_e.a.select,onChange:function(e){return p(e.target.value)},children:Object(Y.jsx)("option",{value:"En",children:"En"})})})}),Object(Y.jsx)(Oe.a,{md:3,lg:2,children:Object(Y.jsx)(Q.a,{type:"submit",variant:"primary",className:"w-100 h-100",disabled:_,children:"Search"})})]})}),Object(Y.jsxs)(pe.a,{className:"my-5",children:[Object(Y.jsx)(Oe.a,{md:4,children:Object(Y.jsx)("hr",{})}),Object(Y.jsx)(Oe.a,{md:4,className:"d-flex justify-content-center",children:Object(Y.jsx)("span",{className:"text-nowrap lead",children:m?"Most popular":"Search results"})}),Object(Y.jsx)(Oe.a,{md:4,children:Object(Y.jsx)("hr",{})})]}),S||_?Object(Y.jsx)(Z,{children:Object(Y.jsx)(h.HashLoader,{})}):m?Object(Y.jsx)(ve,{popularProducts:N}):Object(Y.jsx)(Pe,{foundProducts:P})]})}},{path:T.ProductDetails,component:function(e){var t=e.match.params,r=t.asin,a=t.lang,n=g((function(e){return e.productDetails})),s=n.productDetails,u=n.productClusters,l=n.isDetailsLoading,o=n.isClustersLoading,d=n.detailsError,j=n.clustersError,b=J(),h=b.fetchProductDetails,p=b.fetchProductClusters;Object(c.useEffect)((function(){h({asin:r});var e=w.a.CancelToken.source();return p({cancelToken:e.token,asin:r,lang:a}),function(){return e.cancel()}}),[r,a]);var O=!l&&(null===s||void 0===s?void 0:s.variants)&&s.variants.length>1;return Object(Y.jsxs)(i.a,{className:"pb-5",children:[Object(Y.jsxs)(pe.a,{className:"g-4 mt-3",children:[Object(Y.jsx)(Oe.a,{md:5,lg:3,children:Object(Y.jsx)(ie,{details:s,isLoading:l,error:d})}),Object(Y.jsx)(Oe.a,{md:7,lg:9,children:Object(Y.jsx)(he,{clusters:u,isLoading:o,error:j})})]}),O&&Object(Y.jsx)(xe,{details:s})]})}}],De=function(e,t){return Object.entries(t).reduce((function(e,t){var r=Object(l.a)(t,2),c=r[0],a=r[1];return e.replace(":".concat(c),a)}),e)},Ee=function(){return Object(Y.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",children:Object(Y.jsxs)(i.a,{children:[Object(Y.jsx)(s.a.Brand,{as:u.b,to:T.Home,children:"Short Sentences"}),Object(Y.jsx)(s.a.Toggle,{}),Object(Y.jsx)(s.a.Collapse,{className:"justify-content-end",children:Object(Y.jsxs)(s.a.Text,{children:["Using public ",Object(Y.jsx)("b",{children:"Amazon API"})]})})]})})},Ce=function(e){var t=e.children;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Ee,{}),t]})},Be=function(){return Object(Y.jsx)(u.a,{basename:"/",children:Object(Y.jsx)(b.c,{children:Le.map((function(e,t){return Object(Y.jsx)(b.a,{exact:!0,path:e.path,render:function(t){var r=e.component;return Object(Y.jsx)(Ce,{children:Object(Y.jsx)(r,Object(y.a)({},t))})}},t)}))})})};n.a.render(Object(Y.jsx)(m.a,{store:A,children:Object(Y.jsx)(Be,{})}),document.getElementById("root"))},43:function(e,t,r){e.exports={starWrapper:"RatingBlock_starWrapper__3g6mB",filled:"RatingBlock_filled__1EPlk",ratingWrapper:"RatingBlock_ratingWrapper__2DfNs",rating:"RatingBlock_rating__3Vf8B"}},44:function(e,t,r){e.exports={card:"ClusterDetails_card__2rJ2E",cardHeader:"ClusterDetails_cardHeader__39RZa",focused:"ClusterDetails_focused__2gfxo"}},64:function(e,t,r){e.exports={cardGroup:"ProductsPopular_cardGroup__IFBf5",card:"ProductsPopular_card__20fIV"}},65:function(e,t,r){e.exports={container:"Home_container__2mBc-",select:"Home_select__3upMm",invalidTooltip:"Home_invalidTooltip__2VyY-"}},82:function(e,t,r){e.exports={searchRow:"ProductsSearch_searchRow__5s3Gr"}},89:function(e,t,r){}},[[141,1,2]]]);
//# sourceMappingURL=main.1fe90eae.chunk.js.map