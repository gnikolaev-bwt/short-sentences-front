(this["webpackJsonpshort-sentences"]=this["webpackJsonpshort-sentences"]||[]).push([[0],{136:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r(24),n=r.n(c),s=(r(83),r(141)),i=r(140),u=r(28),o=r(11),l=r(13),d=r.n(l),j=r(25),b=r(12),p=r(32),h=function(e,t){var r=null!==t&&void 0!==t?t:12;return e.split(" ").length>r?e.split(" ").slice(0,r).join(" ")+"...":e},O=function(e,t){var r=null!==t&&void 0!==t?t:30;return e.length>r?e.slice(0,r)+"...":e},f=function(e){var t=new RegExp("B[0-9]{2}[0-9A-Z]{7}|[0-9]{9}(X|0-9])").exec(e);return t?null===t||void 0===t?void 0:t[0]:null},x=function(e){var t=new Date(0);return t.setSeconds(e),t.toISOString().substr(14,5)},m=r(34),g=m.c,v=r(27),P=r(3),y=r(26),N=r(8),_=r(31),w=r(41),k=r.n(w),S=k.a.create({baseURL:"https://".concat("amazon23.p.rapidapi.com"),headers:{"x-rapidapi-host":"amazon23.p.rapidapi.com","x-rapidapi-key":"ecd72b8709msh07f4cd4e5a0c83fp1bfae3jsncf9c29afc457"}}),L=k.a.create({baseURL:"localhost"===window.location.hostname?"http://192.168.0.75:90":"https://95.170.154.243:90"}),D=function e(){Object(_.a)(this,e)};D.getProductDetails=function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/product-details",{params:{asin:t,country:"US"}});case 2:return r=e.sent,e.abrupt("return",r.data.result[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.searchForProduct=function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/product-search",{params:{query:t,country:"US"}});case 2:return r=e.sent,e.abrupt("return",r.data.result);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.getProductClusters=function(){var e=Object(j.a)(d.a.mark((function e(t,r,a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.get("/process",{cancelToken:t,params:{asin:r,language:a}});case 3:return c=e.sent,e.abrupt("return",c.data.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,a){return e.apply(this,arguments)}}();var C,B,E,R=[{asin:"B096BKFG57",lang:"En"},{asin:"B01MQWUXZS",lang:"En"},{asin:"B01K9S260E",lang:"En"}],T=Object(y.b)("productList/fetchPopularProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,!(c=a()).productList.popularProducts.length){e.next=4;break}return e.abrupt("return",c.productList.popularProducts);case 4:return n=R.map((function(e){return D.getProductDetails(e.asin)})),e.abrupt("return",Promise.all(n));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),F=Object(y.b)("productList/searchForProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,(c=a()).productList.lastQuery!==t){e.next=4;break}return e.abrupt("return",{query:t,products:c.productList.foundProducts});case 4:return e.t0=t,e.next=7,D.searchForProduct(t);case 7:return e.t1=e.sent,e.abrupt("return",{query:e.t0,products:e.t1});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),H={fetchPopularProducts:T,searchForProducts:F},I=Object(y.c)({name:"productList",initialState:{popularProducts:[],foundProducts:[],lastQuery:null,isLoading:!1,isShowingPopular:!0},reducers:{},extraReducers:(C={},Object(N.a)(C,T.pending.type,(function(e){e.isLoading=!0})),Object(N.a)(C,T.fulfilled.type,(function(e,t){e.popularProducts=t.payload,e.isLoading=!1,e.isShowingPopular=!0})),Object(N.a)(C,F.pending.type,(function(e){e.isLoading=!0})),Object(N.a)(C,F.fulfilled.type,(function(e,t){e.foundProducts=t.payload.products,e.lastQuery=t.payload.query,e.isLoading=!1,e.isShowingPopular=!1})),C)}).reducer,z=Object(y.b)("productDetails/fetchProductDetails",function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.getProductDetails(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(y.b)("productDetails/fetchProductClusters",function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.getProductClusters(t.cancelToken,t.asin,t.lang));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U={fetchProductDetails:z,fetchProductClusters:W},A=Object(y.c)({name:"productDetails",initialState:{productDetails:null,productClusters:[],isDetailsLoading:!1,isClustersLoading:!1},reducers:{},extraReducers:(B={},Object(N.a)(B,z.pending.type,(function(e){e.isDetailsLoading=!0})),Object(N.a)(B,z.fulfilled.type,(function(e,t){e.productDetails=t.payload,e.isDetailsLoading=!1})),Object(N.a)(B,W.pending.type,(function(e){e.isClustersLoading=!0})),Object(N.a)(B,W.fulfilled.type,(function(e,t){e.productClusters=t.payload,e.isClustersLoading=!1})),B)}).reducer,G=Object(y.a)({reducer:{productList:I,productDetails:A}}),q=Object(P.a)(Object(P.a)({},H),U),M=function(){var e=Object(m.b)();return Object(v.b)(q,e)},Q=r(143),V=r(144),J=r(2),Z=function(e){var t=e.children;return Object(J.jsx)("div",{className:"w-100 h-100 d-flex flex-column align-items-center my-5",children:t})},K=function(e){var t=e.src,r=e.height,a=e.bgSize;return Object(J.jsx)("div",{style:{height:null!==r&&void 0!==r?r:"15rem",backgroundImage:t?"url(".concat(t,")"):"none",backgroundColor:t?"none":"#2b2b2b",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:t?null!==a&&void 0!==a?a:"50%":"100%"}})},X=r(42),Y=r(5),$=r.n(Y),ee=r(38),te=r.n(ee),re=function(e){var t=e.rating,r=parseFloat(t);return Object(J.jsxs)("div",{className:"d-flex align-items-center",children:[Array.from({length:5}).map((function(e,t){return t<r?Object(J.jsx)("div",{className:$()(te.a.starWrapper,te.a.filled),children:Object(J.jsx)(X.a,{})},t):Object(J.jsx)("div",{className:te.a.starWrapper,children:Object(J.jsx)(X.b,{})},t)})),Object(J.jsx)("div",{className:te.a.ratingWrapper,children:Object(J.jsx)("div",{className:te.a.rating,children:t})})]})},ae=function(e){var t=e.isLoading,r=e.details;return Object(J.jsx)(Q.a,{children:t?Object(J.jsx)(Z,{children:Object(J.jsx)(p.ScaleLoader,{})}):r?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(K,{src:r.main_image,height:"15rem",bgSize:"50%"}),Object(J.jsxs)(Q.a.Body,{children:[Object(J.jsx)(Q.a.Title,{children:r.title}),Object(J.jsx)("hr",{}),Object(J.jsx)("div",{className:"my-3",children:Object(J.jsx)(re,{rating:r.reviews.rating})}),r.description&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("hr",{}),Object(J.jsx)(Q.a.Text,{children:O(r.description,100)})]}),Object(J.jsx)("hr",{}),Object(J.jsx)(V.a,{as:"a",className:"w-100",variant:"outline-dark",href:r.url,target:"_blank",children:"Open in Amazon store"})]})]}):Object(J.jsx)("span",{children:"Some error occured"})})},ce=r(78),ne=r(51),se=r(70),ie=r(44),ue=r.n(ie),oe=function(e){var t=e.cluster,r=Object(a.useState)(!1),c=Object(o.a)(r,2),n=c[0],s=c[1],i=$()(ue.a.card,Object(N.a)({},ue.a.focused,n));return Object(J.jsxs)(Q.a,{className:i,children:[Object(J.jsxs)("div",{className:ue.a.cardHeader,onClick:function(){return s((function(e){return!e}))},children:[Object(J.jsxs)("div",{className:"flex-grow-1",children:[Object(J.jsx)(Q.a.Title,{children:t.group}),Object(J.jsx)(Q.a.Text,{children:t["cluster description"]})]}),Object(J.jsxs)("div",{className:"d-flex align-items-center mx-2",children:[Object(J.jsx)(ne.c,{className:"me-1"}),Object(J.jsx)("span",{className:"lead",children:t.statements})]}),Object(J.jsx)("div",{className:"d-flex align-items-center mx-3",children:n?Object(J.jsx)(ne.a,{}):Object(J.jsx)(ne.b,{})})]}),Object(J.jsx)(ce.a,{in:n,children:Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{className:ue.a.hr}),t.sentences.map((function(e,t){return Object(J.jsxs)("div",{children:[Object(J.jsx)(se.a,{}),Object(J.jsx)("span",{className:"ms-1",children:e})]},t)})),Object(J.jsx)(V.a,{variant:"light",className:"w-100 mt-3",children:"View all"})]})})]})},le=function(e){var t=e.asin,r=e.src,a=e.title,c=e.rating,n=ke(E.ProductDetails,{asin:t,lang:"En"});return Object(J.jsxs)(Q.a,{as:u.b,className:"h-100",to:n,children:[Object(J.jsx)(K,{src:r,height:"10rem",bgSize:"40%"}),Object(J.jsxs)(Q.a.Body,{children:[Object(J.jsx)(Q.a.Title,{children:a}),c&&Object(J.jsx)(re,{rating:"".concat(c)})]})]})},de=function(e){var t=e.isLoading,r=e.clusters,c=Object(a.useState)(0),n=Object(o.a)(c,2),s=n[0],i=n[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return i((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[r]),Object(J.jsxs)("div",{className:"rounded-3 border p-4",children:[Object(J.jsx)("h4",{children:"Review Summary"}),Object(J.jsx)("div",{className:"mt-3",children:t?Object(J.jsxs)(Z,{children:[Object(J.jsx)(p.ClockLoader,{}),Object(J.jsx)("div",{className:"mt-2",children:"It takes about 1 minute to load reviews"}),Object(J.jsxs)("div",{className:"mt-1",children:["Time passed: ",x(s)]})]}):r.length?r.map((function(e,t){return Object(J.jsx)(oe,{cluster:e},t)})):Object(J.jsx)("span",{children:"No reviews found for this product"})})]})},je=r(138),be=r(72),pe=function(e){var t=e.details,r=Object(a.useState)(!1),c=Object(o.a)(r,2),n=c[0],s=c[1],i=Object(a.useState)(4),u=Object(o.a)(i,2),l=u[0],d=u[1];return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(je.a,{className:"mt-4",children:Object(J.jsx)("hr",{})}),Object(J.jsx)(je.a,{className:"mt-2",children:Object(J.jsx)("h3",{children:"You'd may also like to see:"})}),Object(J.jsx)(je.a,{children:t.variants.filter((function(e){return!e.is_current_product})).slice(0,l).map((function(e,t){var r;return Object(J.jsx)(be.a,{md:3,className:"mt-3",children:Object(J.jsx)(le,{asin:e.asin,src:null===(r=e.images[0])||void 0===r?void 0:r.large,title:e.title})},t)}))}),t.variants.length>4&&Object(J.jsx)(je.a,{className:"justify-content-center mt-3",children:Object(J.jsx)(be.a,{md:6,children:Object(J.jsx)(V.a,{variant:"outline-dark",className:"w-100",onClick:function(){d(n?4:t.variants.length),s(!n)},children:n?"Hide":"Show more"})})})]})},he=r(139),Oe=r(56),fe=r.n(Oe),xe=function(e){var t=e.popularProducts;return Object(J.jsx)(he.a,{className:fe.a.cardGroup,children:t.slice(0,3).map((function(e,t){var r=ke(E.ProductDetails,{asin:R[t].asin,lang:R[t].lang});return Object(J.jsxs)(Q.a,{className:fe.a.card,as:u.b,to:r,children:[Object(J.jsx)(K,{src:e.main_image,height:"15rem",bgSize:"25%"}),Object(J.jsx)(Q.a.Body,{children:Object(J.jsx)(Q.a.Title,{children:h(e.title,20)})}),Object(J.jsx)(Q.a.Footer,{children:Object(J.jsxs)("small",{className:"text-muted",children:["Most popular ",Object(J.jsx)(X.b,{})]})})]},t)}))})},me=r(73),ge=r.n(me),ve=function(e){var t=e.foundProducts;return Object(J.jsx)(je.a,{className:ge.a.searchRow,children:t.slice(0,10).map((function(e,t){return Object(J.jsx)(be.a,{md:3,className:"mt-3",children:Object(J.jsx)(le,{asin:e.asin,src:e.thumbnail,title:e.title,rating:e.reviews.rating})},t)}))})},Pe=r(57),ye=r.n(Pe),Ne=r(74),_e=r(142);!function(e){e.Home="/",e.ProductDetails="/:asin/:lang"}(E||(E={}));var we=[{path:E.Home,component:function(){var e=Object(b.f)(),t=Object(a.useState)(""),r=Object(o.a)(t,2),c=r[0],n=r[1],s=Object(a.useState)("En"),u=Object(o.a)(s,2),l=u[0],h=u[1],O=g((function(e){return e.productList})),x=O.isLoading,m=O.isShowingPopular,v=O.popularProducts,P=O.foundProducts,y=M(),N=y.fetchPopularProducts,_=y.searchForProducts;Object(a.useEffect)((function(){N()}),[]);var w=function(){var t=Object(j.a)(d.a.mark((function t(r){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),(a=f(c))?(n=ke(E.ProductDetails,{asin:a,lang:l}),e.push(n)):c?_(c):N();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(J.jsxs)(i.a,{className:ye.a.container,children:[Object(J.jsx)(je.a,{className:"g-2",children:Object(J.jsx)(be.a,{md:12,children:Object(J.jsx)("h2",{children:"Search for product"})})}),Object(J.jsx)("form",{onSubmit:w,autoComplete:"off",children:Object(J.jsxs)(je.a,{className:"g-2 mt-2",children:[Object(J.jsx)(be.a,{md:6,lg:8,children:Object(J.jsx)(Ne.a,{controlId:"asin",label:"Product name or asin",children:Object(J.jsx)(_e.a.Control,{placeholder:"...",onChange:function(e){return n(e.target.value)}})})}),Object(J.jsx)(be.a,{md:3,lg:2,children:Object(J.jsx)(Ne.a,{label:"Select language",children:Object(J.jsx)(_e.a.Control,{as:"select",className:ye.a.select,onChange:function(e){return h(e.target.value)},children:Object(J.jsx)("option",{value:"En",children:"En"})})})}),Object(J.jsx)(be.a,{md:3,lg:2,children:Object(J.jsx)(V.a,{type:"submit",variant:"primary",className:"w-100 h-100",disabled:x,children:"Search"})})]})}),Object(J.jsxs)(je.a,{className:"my-5",children:[Object(J.jsx)(be.a,{md:4,children:Object(J.jsx)("hr",{})}),Object(J.jsx)(be.a,{md:4,className:"d-flex justify-content-center",children:Object(J.jsx)("span",{className:"text-nowrap lead",children:m?"Most popular":"Search results"})}),Object(J.jsx)(be.a,{md:4,children:Object(J.jsx)("hr",{})})]}),x?Object(J.jsx)(Z,{children:Object(J.jsx)(p.HashLoader,{})}):m?Object(J.jsx)(xe,{popularProducts:v}):Object(J.jsx)(ve,{foundProducts:P})]})}},{path:E.ProductDetails,component:function(e){var t,r=e.match.params,c=r.asin,n=r.lang,s=g((function(e){return e.productDetails})),u=s.productDetails,o=s.productClusters,l=s.isDetailsLoading,d=s.isClustersLoading,j=M(),b=j.fetchProductDetails,p=j.fetchProductClusters;return Object(a.useEffect)((function(){b(c);var e=k.a.CancelToken.source();return p({cancelToken:e.token,asin:c,lang:n}),function(){return e.cancel()}}),[c,n]),Object(J.jsxs)(i.a,{className:"pb-5",children:[Object(J.jsxs)(je.a,{className:"g-4 mt-3",children:[Object(J.jsx)(be.a,{md:5,lg:3,children:Object(J.jsx)(ae,{isLoading:l,details:u})}),Object(J.jsx)(be.a,{md:7,lg:9,children:Object(J.jsx)(de,{isLoading:d,clusters:o})})]}),!l&&!!(null===u||void 0===u||null===(t=u.variants)||void 0===t?void 0:t.length)&&Object(J.jsx)(pe,{details:u})]})}}],ke=function(e,t){return Object.entries(t).reduce((function(e,t){var r=Object(o.a)(t,2),a=r[0],c=r[1];return e.replace(":".concat(a),c)}),e)},Se=function(){return Object(J.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",children:Object(J.jsxs)(i.a,{children:[Object(J.jsx)(s.a.Brand,{as:u.b,to:E.Home,children:"Short Sentences"}),Object(J.jsx)(s.a.Toggle,{}),Object(J.jsx)(s.a.Collapse,{className:"justify-content-end",children:Object(J.jsxs)(s.a.Text,{children:["Using public ",Object(J.jsx)("b",{children:"Amazon API"})]})})]})})},Le=function(e){var t=e.children;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Se,{}),t]})},De=function(){return Object(J.jsx)(u.a,{basename:"/",children:Object(J.jsx)(b.c,{children:we.map((function(e,t){return Object(J.jsx)(b.a,{exact:!0,path:e.path,render:function(t){var r=e.component;return Object(J.jsx)(Le,{children:Object(J.jsx)(r,Object(P.a)({},t))})}},t)}))})})};n.a.render(Object(J.jsx)(m.a,{store:G,children:Object(J.jsx)(De,{})}),document.getElementById("root"))},38:function(e,t,r){e.exports={starWrapper:"RatingBlock_starWrapper__3g6mB",filled:"RatingBlock_filled__1EPlk",ratingWrapper:"RatingBlock_ratingWrapper__2DfNs",rating:"RatingBlock_rating__3Vf8B"}},44:function(e,t,r){e.exports={card:"ClusterDetails_card__2rJ2E",cardHeader:"ClusterDetails_cardHeader__39RZa",focused:"ClusterDetails_focused__2gfxo"}},56:function(e,t,r){e.exports={cardGroup:"ProductsPopular_cardGroup__IFBf5",card:"ProductsPopular_card__20fIV"}},57:function(e,t,r){e.exports={container:"Home_container__2mBc-",select:"Home_select__3upMm",invalidTooltip:"Home_invalidTooltip__2VyY-"}},73:function(e,t,r){e.exports={searchRow:"ProductsSearch_searchRow__5s3Gr"}},83:function(e,t,r){}},[[136,1,2]]]);
//# sourceMappingURL=main.ceddec31.chunk.js.map