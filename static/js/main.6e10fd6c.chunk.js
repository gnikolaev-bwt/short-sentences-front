(this["webpackJsonpshort-sentences"]=this["webpackJsonpshort-sentences"]||[]).push([[0],{141:function(e,t,r){"use strict";r.r(t);var c=r(1),a=r(24),n=r.n(a),s=(r(89),r(147)),i=r(146),u=r(31),l=r(9),o=r(14),d=r.n(o),j=r(25),b=r(12),h=r(40),p=function(e,t){var r=null!==t&&void 0!==t?t:12;return e.split(" ").length>r?e.split(" ").slice(0,r).join(" ")+"...":e},O=function(e,t){var r=null!==t&&void 0!==t?t:30;return e.length>r?e.slice(0,r)+"...":e},x=function(e){var t=new RegExp("B[0-9]{2}[0-9A-Z]{7}|[0-9]{9}(X|0-9])").exec(e);return t?null===t||void 0===t?void 0:t[0]:null},f=function(e){var t=new Date(0);return t.setSeconds(e),t.toISOString().substr(14,5)},m=r(41),g=m.c,v=r(29),y=r(3),N=r(26),P=r(8),S=r(37),_=r(46),w=r.n(_),k=w.a.create({baseURL:"https://".concat("amazon23.p.rapidapi.com"),headers:{"x-rapidapi-host":"amazon23.p.rapidapi.com","x-rapidapi-key":"ecd72b8709msh07f4cd4e5a0c83fp1bfae3jsncf9c29afc457"}}),L=w.a.create({baseURL:"localhost"===window.location.hostname?"http://192.168.0.75:90":"https://95.170.154.243:90"}),D=function e(){Object(S.a)(this,e)};D.getProductDetails=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-details",params:{asin:t,country:"US"}},e.next=3,k.request(r);case 3:return c=e.sent,e.abrupt("return",c.data.result[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.searchForProduct=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-search",params:{query:t,country:"US"}},e.next=3,k.request(r);case 3:return c=e.sent,e.abrupt("return",c.data.result);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.getProductClusters=function(){var e=Object(j.a)(d.a.mark((function e(t,r,c){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",url:"/process",cancelToken:t},e.next=3,L.request(a);case 3:if("OK"===(n=e.sent).data.status){e.next=6;break}throw Error(n.data.error);case 6:return e.abrupt("return",n.data.data);case 7:case"end":return e.stop()}}),e)})));return function(t,r,c){return e.apply(this,arguments)}}();var E,C,B,T=[{asin:"B096BKFG57",lang:"En"},{asin:"B07G853D6N",lang:"En"},{asin:"B01K9S260E",lang:"En"}],z=Object(N.b)("productList/fetchPopularProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,a=T.map((function(e){return D.getProductDetails(e.asin)})),e.next=5,Promise.all(a);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().productList.popularProducts.length}}),R=Object(N.b)("productList/searchForProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,e.next=4,D.searchForProduct(t.query);case 4:return a=e.sent,e.abrupt("return",{query:t.query,products:a});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return(0,t.getState)().productList.lastQuery!==e.query}}),F={fetchPopularProducts:z,searchForProducts:R},H=Object(N.c)({name:"productList",initialState:{popularProducts:[],foundProducts:[],lastQuery:null,isPopularLoading:!1,isSearchLoading:!1,popularError:"",searchError:""},reducers:{},extraReducers:(E={},Object(P.a)(E,z.pending.type,(function(e){e.isPopularLoading=!0})),Object(P.a)(E,z.fulfilled.type,(function(e,t){e.popularProducts=t.payload,e.isPopularLoading=!1})),Object(P.a)(E,R.pending.type,(function(e){e.isSearchLoading=!0})),Object(P.a)(E,R.fulfilled.type,(function(e,t){e.foundProducts=t.payload.products,e.lastQuery=t.payload.query,e.isSearchLoading=!1})),E)}).reducer,I=Object(N.b)("productDetails/fetchProductDetails",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,e.next=4,D.getProductDetails(t.asin);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()),W=Object(N.b)("productDetails/fetchProductClusters",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var c,a,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,e.prev=1,a=t.cancelToken,n=t.asin,s=t.lang,e.next=5,D.getProductClusters(a,n,s);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),q={fetchProductDetails:I,fetchProductClusters:W},G=Object(N.c)({name:"productDetails",initialState:{productDetails:null,productClusters:[],isDetailsLoading:!1,isClustersLoading:!1,detailsError:"",clustersError:""},reducers:{},extraReducers:(C={},Object(P.a)(C,I.pending.type,(function(e){e.isDetailsLoading=!0})),Object(P.a)(C,I.fulfilled.type,(function(e,t){e.productDetails=t.payload,e.isDetailsLoading=!1,e.detailsError=""})),Object(P.a)(C,I.rejected.type,(function(e,t){e.isDetailsLoading=!1,e.detailsError=t.payload})),Object(P.a)(C,W.pending.type,(function(e){e.isClustersLoading=!0})),Object(P.a)(C,W.fulfilled.type,(function(e,t){e.productClusters=t.payload,e.isClustersLoading=!1,e.clustersError=""})),Object(P.a)(C,W.rejected.type,(function(e,t){e.isClustersLoading=!1,e.clustersError=t.payload})),C)}).reducer,V=Object(N.a)({reducer:{productList:H,productDetails:G}}),A=Object(y.a)(Object(y.a)({},F),q),U=function(){var e=Object(m.b)();return Object(v.b)(A,e)},J=r(36),K=r(150),M=r(143),Q=r(2),Y=function(e){var t=e.children;return Object(Q.jsx)("div",{className:"w-100 h-100 p-5",children:Object(Q.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:t})})},Z=function(e){var t=e.src,r=e.height,c=e.bgSize;return Object(Q.jsx)("div",{style:{height:null!==r&&void 0!==r?r:"15rem",backgroundImage:t?"url(".concat(t,")"):"none",backgroundColor:t?"none":"#2b2b2b",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:t?null!==c&&void 0!==c?c:"50%":"100%"}})},X=r(47),$=r(4),ee=r.n($),te=r(43),re=r.n(te),ce=function(e){var t=e.rating,r=parseFloat(t);return Object(Q.jsxs)("div",{className:"d-flex align-items-center",children:[Array.from({length:5}).map((function(e,t){return t<r?Object(Q.jsx)("div",{className:ee()(re.a.starWrapper,re.a.filled),children:Object(Q.jsx)(X.a,{})},t):Object(Q.jsx)("div",{className:re.a.starWrapper,children:Object(Q.jsx)(X.b,{})},t)})),Object(Q.jsx)("div",{className:re.a.ratingWrapper,children:Object(Q.jsx)("div",{className:re.a.rating,children:t})})]})},ae=r(148),ne=function(e){var t=e.images,r=e.height,c=e.bgSize;return t.length>1?Object(Q.jsx)(ae.a,{interval:null,variant:"dark",children:t.map((function(e,t){return Object(Q.jsx)(ae.a.Item,{children:Object(Q.jsx)(Z,{src:e,height:r,bgSize:c})},t)}))}):Object(Q.jsx)(Z,{src:t[0],height:r,bgSize:c})},se=function(e){var t=e.details,r=e.isLoading,c=e.error;return Object(Q.jsx)(K.a,{children:r?Object(Q.jsx)(Y,{children:Object(Q.jsx)(h.ScaleLoader,{})}):c||!t?Object(Q.jsxs)(Y,{children:[Object(Q.jsx)(J.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"Some error occured on product load."})]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ne,{images:t.images,height:"17rem",bgSize:"60%"}),Object(Q.jsxs)(K.a.Body,{children:[Object(Q.jsx)(K.a.Title,{children:t.title}),Object(Q.jsx)("hr",{}),Object(Q.jsx)("div",{className:"my-3",children:Object(Q.jsx)(ce,{rating:t.reviews.rating})}),t.description&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("hr",{}),Object(Q.jsx)(K.a.Text,{children:O(t.description,100)})]}),Object(Q.jsx)("hr",{}),Object(Q.jsx)(M.a,{as:"a",className:"w-100",variant:"outline-dark",href:t.url,target:"_blank",children:"Open in Amazon store"})]})]})})},ie=r(84),ue=r(59),le=r(44),oe=r.n(le),de=function(e){var t=e.cluster,r=Object(c.useState)(!1),a=Object(l.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(!1),u=Object(l.a)(i,2),o=u[0],d=u[1],j=o?t.sentences.length:5;return Object(Q.jsxs)(K.a,{className:ee()(oe.a.card,Object(P.a)({},oe.a.focused,n)),children:[Object(Q.jsxs)("div",{className:oe.a.cardHeader,onClick:function(){return s((function(e){return!e}))},children:[Object(Q.jsxs)("div",{className:"flex-grow-1",children:[Object(Q.jsx)(K.a.Title,{children:t["cluster description"][0]}),Object(Q.jsx)(K.a.Text,{children:t["cluster description"][1]})]}),Object(Q.jsxs)("div",{className:"d-flex align-items-center mx-2",children:[Object(Q.jsx)(ue.c,{className:"me-1"}),Object(Q.jsx)("span",{className:"lead",children:t.statements})]}),Object(Q.jsx)("div",{className:"d-flex align-items-center mx-3",children:n?Object(Q.jsx)(ue.a,{}):Object(Q.jsx)(ue.b,{})})]}),Object(Q.jsx)(ie.a,{in:n,children:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("hr",{className:oe.a.hr}),t.sentences.slice(0,j).map((function(e,t){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(J.a,{}),Object(Q.jsx)("span",{className:"ms-2",children:e})]},t)})),Object(Q.jsx)("hr",{className:oe.a.hr}),Object(Q.jsx)(M.a,{variant:"light",className:"w-100",onClick:function(){return d((function(e){return!e}))},children:o?"Hide":"Expand reviews"})]})})]})},je=function(e){var t=e.asin,r=e.src,c=e.title,a=e.rating,n=Le(B.ProductDetails,{asin:t,lang:"En"});return Object(Q.jsxs)(K.a,{as:u.b,className:"h-100",to:n,children:[Object(Q.jsx)(Z,{src:r,height:"10rem",bgSize:"40%"}),Object(Q.jsxs)(K.a.Body,{children:[Object(Q.jsx)(K.a.Title,{children:c}),a&&Object(Q.jsx)(ce,{rating:"".concat(a)})]})]})},be=function(e){var t=e.clusters,r=e.isLoading,a=e.error,n=Object(c.useState)(0),s=Object(l.a)(n,2),i=s[0],u=s[1];return Object(c.useEffect)((function(){if(r){u(0);var e=setInterval((function(){u((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}}),[r]),Object(Q.jsxs)("div",{className:"rounded-3 border p-4",children:[Object(Q.jsx)("h4",{children:"Review Summary"}),Object(Q.jsx)("hr",{className:"my-4"}),Object(Q.jsx)("div",{children:r?Object(Q.jsxs)(Y,{children:[Object(Q.jsx)(h.ClockLoader,{}),Object(Q.jsx)("div",{className:"mt-2",children:"It takes about 1 minute to load reviews"}),Object(Q.jsxs)("div",{className:"mt-1",children:["Time passed: ",f(i)]})]}):a?Object(Q.jsxs)(Y,{children:[Object(Q.jsx)(J.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"Some error occured on reviews load."})]}):t.length?t.map((function(e,t){return Object(Q.jsx)(de,{cluster:e},t)})):Object(Q.jsxs)(Y,{children:[Object(Q.jsx)(J.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"No reviews found for this product."})]})})]})},he=r(144),pe=r(81),Oe=function(e){var t=e.details,r=Object(c.useState)(!1),a=Object(l.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(4),u=Object(l.a)(i,2),o=u[0],d=u[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(he.a,{className:"mt-4",children:Object(Q.jsx)("hr",{})}),Object(Q.jsx)(he.a,{className:"mt-2",children:Object(Q.jsx)("h3",{children:"You'd may also like to see:"})}),Object(Q.jsx)(he.a,{children:t.variants.filter((function(e){return!e.is_current_product})).slice(0,o).map((function(e,t){var r;return Object(Q.jsx)(pe.a,{md:3,className:"mt-3",children:Object(Q.jsx)(je,{asin:e.asin,src:null===(r=e.images[0])||void 0===r?void 0:r.large,title:e.title})},t)}))}),t.variants.length>4&&Object(Q.jsx)(he.a,{className:"justify-content-center mt-3",children:Object(Q.jsx)(pe.a,{md:6,children:Object(Q.jsx)(M.a,{variant:"outline-dark",className:"w-100",onClick:function(){d(n?4:t.variants.length),s(!n)},children:n?"Hide":"Show more"})})})]})},xe=r(145),fe=r(64),me=r.n(fe),ge=function(e){var t=e.popularProducts;return Object(Q.jsx)(xe.a,{className:me.a.cardGroup,children:t.slice(0,3).map((function(e,t){var r=Le(B.ProductDetails,{asin:T[t].asin,lang:T[t].lang});return Object(Q.jsxs)(K.a,{className:me.a.card,as:u.b,to:r,children:[Object(Q.jsx)(Z,{src:e.main_image,height:"15rem",bgSize:"25%"}),Object(Q.jsx)(K.a.Body,{children:Object(Q.jsx)(K.a.Title,{children:p(e.title,20)})}),Object(Q.jsx)(K.a.Footer,{children:Object(Q.jsxs)("small",{className:"text-muted",children:["Most popular ",Object(Q.jsx)(X.b,{})]})})]},t)}))})},ve=r(82),ye=r.n(ve),Ne=function(e){var t=e.foundProducts;return Object(Q.jsx)(he.a,{className:ye.a.searchRow,children:t.slice(0,12).map((function(e,t){return Object(Q.jsx)(pe.a,{md:3,className:"mt-3",children:Object(Q.jsx)(je,{asin:e.asin,src:e.thumbnail,title:e.title,rating:e.reviews.rating})},t)}))})},Pe=r(65),Se=r.n(Pe),_e=r(83),we=r(149);!function(e){e.Home="/",e.ProductDetails="/:asin/:lang"}(B||(B={}));var ke=[{path:B.Home,component:function(){var e=Object(b.f)(),t=Object(c.useState)(""),r=Object(l.a)(t,2),a=r[0],n=r[1],s=Object(c.useState)("En"),u=Object(l.a)(s,2),o=u[0],p=u[1],O=Object(c.useState)(!0),f=Object(l.a)(O,2),m=f[0],v=f[1],y=g((function(e){return e.productList})),N=y.popularProducts,P=y.foundProducts,S=y.isPopularLoading,_=y.isSearchLoading,w=U(),k=w.fetchPopularProducts,L=w.searchForProducts;Object(c.useEffect)((function(){k()}),[]);var D=function(){var t=Object(j.a)(d.a.mark((function t(r){var c,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),(c=x(a))?(n=Le(B.ProductDetails,{asin:c,lang:o}),e.push(n)):a?(v(!1),L({query:a})):(v(!0),k());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Q.jsxs)(i.a,{className:Se.a.container,children:[Object(Q.jsx)(he.a,{className:"g-2",children:Object(Q.jsx)(pe.a,{md:12,children:Object(Q.jsx)("h2",{children:"Search for product"})})}),Object(Q.jsx)("form",{onSubmit:D,autoComplete:"off",children:Object(Q.jsxs)(he.a,{className:"g-2 mt-2",children:[Object(Q.jsx)(pe.a,{md:6,lg:8,children:Object(Q.jsx)(_e.a,{controlId:"asin",label:"Product name or asin",children:Object(Q.jsx)(we.a.Control,{placeholder:"...",onChange:function(e){return n(e.target.value)}})})}),Object(Q.jsx)(pe.a,{md:3,lg:2,children:Object(Q.jsx)(_e.a,{label:"Select language",children:Object(Q.jsx)(we.a.Control,{as:"select",className:Se.a.select,onChange:function(e){return p(e.target.value)},children:Object(Q.jsx)("option",{value:"En",children:"En"})})})}),Object(Q.jsx)(pe.a,{md:3,lg:2,children:Object(Q.jsx)(M.a,{type:"submit",variant:"primary",className:"w-100 h-100",disabled:_,children:"Search"})})]})}),Object(Q.jsxs)(he.a,{className:"my-5",children:[Object(Q.jsx)(pe.a,{md:4,children:Object(Q.jsx)("hr",{})}),Object(Q.jsx)(pe.a,{md:4,className:"d-flex justify-content-center",children:Object(Q.jsx)("span",{className:"text-nowrap lead",children:m?"Most popular":"Search results"})}),Object(Q.jsx)(pe.a,{md:4,children:Object(Q.jsx)("hr",{})})]}),S||_?Object(Q.jsx)(Y,{children:Object(Q.jsx)(h.HashLoader,{})}):m?Object(Q.jsx)(ge,{popularProducts:N}):Object(Q.jsx)(Ne,{foundProducts:P})]})}},{path:B.ProductDetails,component:function(e){var t=e.match.params,r=t.asin,a=t.lang,n=g((function(e){return e.productDetails})),s=n.productDetails,u=n.productClusters,l=n.isDetailsLoading,o=n.isClustersLoading,d=n.detailsError,j=n.clustersError,b=U(),h=b.fetchProductDetails,p=b.fetchProductClusters;Object(c.useEffect)((function(){h({asin:r});var e=w.a.CancelToken.source();return p({cancelToken:e.token,asin:r,lang:a}),function(){return e.cancel()}}),[r,a]);var O=!l&&(null===s||void 0===s?void 0:s.variants)&&s.variants.length>1;return Object(Q.jsxs)(i.a,{className:"pb-5",children:[Object(Q.jsxs)(he.a,{className:"g-4 mt-3",children:[Object(Q.jsx)(pe.a,{md:5,lg:3,children:Object(Q.jsx)(se,{details:s,isLoading:l,error:d})}),Object(Q.jsx)(pe.a,{md:7,lg:9,children:Object(Q.jsx)(be,{clusters:u,isLoading:o,error:j})})]}),O&&Object(Q.jsx)(Oe,{details:s})]})}}],Le=function(e,t){return Object.entries(t).reduce((function(e,t){var r=Object(l.a)(t,2),c=r[0],a=r[1];return e.replace(":".concat(c),a)}),e)},De=function(){return Object(Q.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",children:Object(Q.jsxs)(i.a,{children:[Object(Q.jsx)(s.a.Brand,{as:u.b,to:B.Home,children:"Short Sentences"}),Object(Q.jsx)(s.a.Toggle,{}),Object(Q.jsx)(s.a.Collapse,{className:"justify-content-end",children:Object(Q.jsxs)(s.a.Text,{children:["Using public ",Object(Q.jsx)("b",{children:"Amazon API"})]})})]})})},Ee=function(e){var t=e.children;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(De,{}),t]})},Ce=function(){return Object(Q.jsx)(u.a,{basename:"/",children:Object(Q.jsx)(b.c,{children:ke.map((function(e,t){return Object(Q.jsx)(b.a,{exact:!0,path:e.path,render:function(t){var r=e.component;return Object(Q.jsx)(Ee,{children:Object(Q.jsx)(r,Object(y.a)({},t))})}},t)}))})})};n.a.render(Object(Q.jsx)(m.a,{store:V,children:Object(Q.jsx)(Ce,{})}),document.getElementById("root"))},43:function(e,t,r){e.exports={starWrapper:"RatingBlock_starWrapper__3g6mB",filled:"RatingBlock_filled__1EPlk",ratingWrapper:"RatingBlock_ratingWrapper__2DfNs",rating:"RatingBlock_rating__3Vf8B"}},44:function(e,t,r){e.exports={card:"ClusterDetails_card__2rJ2E",cardHeader:"ClusterDetails_cardHeader__39RZa",focused:"ClusterDetails_focused__2gfxo"}},64:function(e,t,r){e.exports={cardGroup:"ProductsPopular_cardGroup__IFBf5",card:"ProductsPopular_card__20fIV"}},65:function(e,t,r){e.exports={container:"Home_container__2mBc-",select:"Home_select__3upMm",invalidTooltip:"Home_invalidTooltip__2VyY-"}},82:function(e,t,r){e.exports={searchRow:"ProductsSearch_searchRow__5s3Gr"}},89:function(e,t,r){}},[[141,1,2]]]);
//# sourceMappingURL=main.6e10fd6c.chunk.js.map