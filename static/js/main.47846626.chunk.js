(this["webpackJsonpshort-sentences"]=this["webpackJsonpshort-sentences"]||[]).push([[0],{142:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r(24),n=r.n(c),s=(r(90),r(148)),i=r(147),u=r(31),l=r(9),o=r(14),d=r.n(o),j=r(25),b=r(12),p=r(39),h=function(e,t){var r=null!==t&&void 0!==t?t:12;return e.split(" ").length>r?e.split(" ").slice(0,r).join(" ")+"...":e},O=function(e,t){var r=null!==t&&void 0!==t?t:30;return e.length>r?e.slice(0,r)+"...":e},x=function(e){var t=new RegExp("B[0-9]{2}[0-9A-Z]{7}|[0-9]{9}(X|0-9])").exec(e);return t?null===t||void 0===t?void 0:t[0]:null},m=function(e){var t=new Date(0);return t.setSeconds(e),t.toISOString().substr(14,5)},f=r(40),g=f.c,v=r(29),y=r(3),P=r(26),N=r(8),_=r(36),S=r(44),w=r.n(S),k=w.a.create({baseURL:"https://".concat("amazon23.p.rapidapi.com"),headers:{"x-rapidapi-host":"amazon23.p.rapidapi.com","x-rapidapi-key":"ecd72b8709msh07f4cd4e5a0c83fp1bfae3jsncf9c29afc457"}}),L=w.a.create({baseURL:"localhost"===window.location.hostname?"http://192.168.0.75:90":"https://95.170.154.243:90"}),D=function e(){Object(_.a)(this,e)};D.getProductDetails=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-details",params:{asin:t,country:"US"}},e.next=3,k.request(r);case 3:return a=e.sent,e.abrupt("return",a.data.result[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.searchForProduct=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"GET",url:"/product-search",params:{query:t,country:"US"}},e.next=3,k.request(r);case 3:return a=e.sent,e.abrupt("return",a.data.result);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.getProductClusters=function(){var e=Object(j.a)(d.a.mark((function e(t,r,a){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",url:"/process",params:{asin:r,language:a},cancelToken:t},e.next=3,L.request(c);case 3:return n=e.sent,e.abrupt("return",n.data.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}();var E,C,B,T=[{asin:"B096BKFG57",lang:"En"},{asin:"B07G853D6N",lang:"En"},{asin:"B01K9S260E",lang:"En"}],z=Object(P.b)("productList/fetchPopularProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,c=T.map((function(e){return D.getProductDetails(e.asin)})),e.next=5,Promise.all(c);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().productList.popularProducts.length}}),R=Object(P.b)("productList/searchForProducts",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,D.searchForProduct(t.query);case 4:return c=e.sent,e.abrupt("return",{query:t.query,products:c});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),{condition:function(e,t){return(0,t.getState)().productList.lastQuery!==e.query}}),F={fetchPopularProducts:z,searchForProducts:R},H=Object(P.c)({name:"productList",initialState:{popularProducts:[],foundProducts:[],lastQuery:null,isPopularLoading:!1,isSearchLoading:!1,popularError:"",searchError:""},reducers:{},extraReducers:(E={},Object(N.a)(E,z.pending.type,(function(e){e.isPopularLoading=!0})),Object(N.a)(E,z.fulfilled.type,(function(e,t){e.popularProducts=t.payload,e.isPopularLoading=!1})),Object(N.a)(E,R.pending.type,(function(e){e.isSearchLoading=!0})),Object(N.a)(E,R.fulfilled.type,(function(e,t){e.foundProducts=t.payload.products,e.lastQuery=t.payload.query,e.isSearchLoading=!1})),E)}).reducer,I=Object(P.b)("productDetails/fetchProductDetails",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,D.getProductDetails(t.asin);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()),W=Object(P.b)("productDetails/fetchProductClusters",function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,c=t.cancelToken,n=t.asin,s=t.lang,e.next=5,D.getProductClusters(c,n,s);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),q={fetchProductDetails:I,fetchProductClusters:W},G=Object(P.c)({name:"productDetails",initialState:{productDetails:null,productClusters:[],isDetailsLoading:!1,isClustersLoading:!1,detailsError:"",clustersError:""},reducers:{},extraReducers:(C={},Object(N.a)(C,I.pending.type,(function(e){e.isDetailsLoading=!0})),Object(N.a)(C,I.fulfilled.type,(function(e,t){e.productDetails=t.payload,e.isDetailsLoading=!1,e.detailsError=""})),Object(N.a)(C,I.rejected.type,(function(e,t){e.isDetailsLoading=!1,e.detailsError=t.payload})),Object(N.a)(C,W.pending.type,(function(e){e.isClustersLoading=!0})),Object(N.a)(C,W.fulfilled.type,(function(e,t){e.productClusters=t.payload,e.isClustersLoading=!1,e.clustersError=""})),Object(N.a)(C,W.rejected.type,(function(e,t){e.isClustersLoading=!1,e.clustersError=t.payload})),C)}).reducer,V=Object(P.a)({reducer:{productList:H,productDetails:G}}),A=Object(y.a)(Object(y.a)({},F),q),U=function(){var e=Object(f.b)();return Object(v.b)(A,e)},J=r(151),M=r(144),Q=r(2),K=function(e){var t=e.children;return Object(Q.jsx)("div",{className:"w-100 h-100 d-flex flex-column align-items-center p-5",children:Object(Q.jsx)("div",{className:"text-center",children:t})})},Y=function(e){var t=e.src,r=e.height,a=e.bgSize;return Object(Q.jsx)("div",{style:{height:null!==r&&void 0!==r?r:"15rem",backgroundImage:t?"url(".concat(t,")"):"none",backgroundColor:t?"none":"#2b2b2b",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:t?null!==a&&void 0!==a?a:"50%":"100%"}})},Z=r(45),X=r(4),$=r.n(X),ee=r(42),te=r.n(ee),re=function(e){var t=e.rating,r=parseFloat(t);return Object(Q.jsxs)("div",{className:"d-flex align-items-center",children:[Array.from({length:5}).map((function(e,t){return t<r?Object(Q.jsx)("div",{className:$()(te.a.starWrapper,te.a.filled),children:Object(Q.jsx)(Z.a,{})},t):Object(Q.jsx)("div",{className:te.a.starWrapper,children:Object(Q.jsx)(Z.b,{})},t)})),Object(Q.jsx)("div",{className:te.a.ratingWrapper,children:Object(Q.jsx)("div",{className:te.a.rating,children:t})})]})},ae=r(149),ce=function(e){var t=e.images,r=e.height,a=e.bgSize;return t.length>1?Object(Q.jsx)(ae.a,{interval:null,variant:"dark",children:t.map((function(e,t){return Object(Q.jsx)(ae.a.Item,{children:Object(Q.jsx)(Y,{src:e,height:r,bgSize:a})},t)}))}):Object(Q.jsx)(Y,{src:t[0],height:r,bgSize:a})},ne=r(79),se=function(e){var t=e.details,r=e.isLoading,a=e.error;return Object(Q.jsx)(J.a,{children:r?Object(Q.jsx)(K,{children:Object(Q.jsx)(p.ScaleLoader,{})}):a||!t?Object(Q.jsxs)(K,{children:[Object(Q.jsx)(ne.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"Some error occured on product load."})]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ce,{images:t.images,height:"17rem",bgSize:"60%"}),Object(Q.jsxs)(J.a.Body,{children:[Object(Q.jsx)(J.a.Title,{children:t.title}),Object(Q.jsx)("hr",{}),Object(Q.jsx)("div",{className:"my-3",children:Object(Q.jsx)(re,{rating:t.reviews.rating})}),t.description&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("hr",{}),Object(Q.jsx)(J.a.Text,{children:O(t.description,100)})]}),Object(Q.jsx)("hr",{}),Object(Q.jsx)(M.a,{as:"a",className:"w-100",variant:"outline-dark",href:t.url,target:"_blank",children:"Open in Amazon store"})]})]})})},ie=r(84),ue=r(58),le=r(47),oe=r.n(le),de=function(e){var t=e.cluster,r=Object(a.useState)(!1),c=Object(l.a)(r,2),n=c[0],s=c[1],i=$()(oe.a.card,Object(N.a)({},oe.a.focused,n));return Object(Q.jsxs)(J.a,{className:i,children:[Object(Q.jsxs)("div",{className:oe.a.cardHeader,onClick:function(){return s((function(e){return!e}))},children:[Object(Q.jsxs)("div",{className:"flex-grow-1",children:[Object(Q.jsx)(J.a.Title,{children:t.group}),Object(Q.jsx)(J.a.Text,{children:t["cluster description"]})]}),Object(Q.jsxs)("div",{className:"d-flex align-items-center mx-2",children:[Object(Q.jsx)(ue.c,{className:"me-1"}),Object(Q.jsx)("span",{className:"lead",children:t.statements})]}),Object(Q.jsx)("div",{className:"d-flex align-items-center mx-3",children:n?Object(Q.jsx)(ue.a,{}):Object(Q.jsx)(ue.b,{})})]}),Object(Q.jsx)(ie.a,{in:n,children:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("hr",{className:oe.a.hr}),t.sentences.map((function(e,t){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(ne.a,{}),Object(Q.jsx)("span",{className:"ms-1",children:e})]},t)})),Object(Q.jsx)(M.a,{variant:"light",className:"w-100 mt-3",children:"View all"})]})})]})},je=function(e){var t=e.asin,r=e.src,a=e.title,c=e.rating,n=Le(B.ProductDetails,{asin:t,lang:"En"});return Object(Q.jsxs)(J.a,{as:u.b,className:"h-100",to:n,children:[Object(Q.jsx)(Y,{src:r,height:"10rem",bgSize:"40%"}),Object(Q.jsxs)(J.a.Body,{children:[Object(Q.jsx)(J.a.Title,{children:a}),c&&Object(Q.jsx)(re,{rating:"".concat(c)})]})]})},be=function(e){var t=e.clusters,r=e.isLoading,c=e.error,n=Object(a.useState)(0),s=Object(l.a)(n,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return u((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[t]),Object(Q.jsxs)("div",{className:"rounded-3 border p-4",children:[Object(Q.jsx)("h4",{children:"Review Summary"}),Object(Q.jsx)("div",{className:"mt-3",children:r?Object(Q.jsxs)(K,{children:[Object(Q.jsx)(p.ClockLoader,{}),Object(Q.jsx)("div",{className:"mt-2",children:"It takes about 1 minute to load reviews"}),Object(Q.jsxs)("div",{className:"mt-1",children:["Time passed: ",m(i)]})]}):c?Object(Q.jsxs)(K,{children:[Object(Q.jsx)(ne.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"Some error occured on reviews load."})]}):t.length?t.map((function(e,t){return Object(Q.jsx)(de,{cluster:e},t)})):Object(Q.jsxs)(K,{children:[Object(Q.jsx)(ne.b,{size:"3rem"}),Object(Q.jsx)("div",{className:"mt-2",children:"No reviews found for this product."})]})})]})},pe=r(145),he=r(81),Oe=function(e){var t=e.details,r=Object(a.useState)(!1),c=Object(l.a)(r,2),n=c[0],s=c[1],i=Object(a.useState)(4),u=Object(l.a)(i,2),o=u[0],d=u[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(pe.a,{className:"mt-4",children:Object(Q.jsx)("hr",{})}),Object(Q.jsx)(pe.a,{className:"mt-2",children:Object(Q.jsx)("h3",{children:"You'd may also like to see:"})}),Object(Q.jsx)(pe.a,{children:t.variants.filter((function(e){return!e.is_current_product})).slice(0,o).map((function(e,t){var r;return Object(Q.jsx)(he.a,{md:3,className:"mt-3",children:Object(Q.jsx)(je,{asin:e.asin,src:null===(r=e.images[0])||void 0===r?void 0:r.large,title:e.title})},t)}))}),t.variants.length>4&&Object(Q.jsx)(pe.a,{className:"justify-content-center mt-3",children:Object(Q.jsx)(he.a,{md:6,children:Object(Q.jsx)(M.a,{variant:"outline-dark",className:"w-100",onClick:function(){d(n?4:t.variants.length),s(!n)},children:n?"Hide":"Show more"})})})]})},xe=r(146),me=r(63),fe=r.n(me),ge=function(e){var t=e.popularProducts;return Object(Q.jsx)(xe.a,{className:fe.a.cardGroup,children:t.slice(0,3).map((function(e,t){var r=Le(B.ProductDetails,{asin:T[t].asin,lang:T[t].lang});return Object(Q.jsxs)(J.a,{className:fe.a.card,as:u.b,to:r,children:[Object(Q.jsx)(Y,{src:e.main_image,height:"15rem",bgSize:"25%"}),Object(Q.jsx)(J.a.Body,{children:Object(Q.jsx)(J.a.Title,{children:h(e.title,20)})}),Object(Q.jsx)(J.a.Footer,{children:Object(Q.jsxs)("small",{className:"text-muted",children:["Most popular ",Object(Q.jsx)(Z.b,{})]})})]},t)}))})},ve=r(82),ye=r.n(ve),Pe=function(e){var t=e.foundProducts;return Object(Q.jsx)(pe.a,{className:ye.a.searchRow,children:t.slice(0,12).map((function(e,t){return Object(Q.jsx)(he.a,{md:3,className:"mt-3",children:Object(Q.jsx)(je,{asin:e.asin,src:e.thumbnail,title:e.title,rating:e.reviews.rating})},t)}))})},Ne=r(64),_e=r.n(Ne),Se=r(83),we=r(150);!function(e){e.Home="/",e.ProductDetails="/:asin/:lang"}(B||(B={}));var ke=[{path:B.Home,component:function(){var e=Object(b.f)(),t=Object(a.useState)(""),r=Object(l.a)(t,2),c=r[0],n=r[1],s=Object(a.useState)("En"),u=Object(l.a)(s,2),o=u[0],h=u[1],O=Object(a.useState)(!0),m=Object(l.a)(O,2),f=m[0],v=m[1],y=g((function(e){return e.productList})),P=y.popularProducts,N=y.foundProducts,_=y.isPopularLoading,S=y.isSearchLoading,w=U(),k=w.fetchPopularProducts,L=w.searchForProducts;Object(a.useEffect)((function(){k()}),[]);var D=function(){var t=Object(j.a)(d.a.mark((function t(r){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),(a=x(c))?(n=Le(B.ProductDetails,{asin:a,lang:o}),e.push(n)):c?(v(!1),L({query:c})):(v(!0),k());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Q.jsxs)(i.a,{className:_e.a.container,children:[Object(Q.jsx)(pe.a,{className:"g-2",children:Object(Q.jsx)(he.a,{md:12,children:Object(Q.jsx)("h2",{children:"Search for product"})})}),Object(Q.jsx)("form",{onSubmit:D,autoComplete:"off",children:Object(Q.jsxs)(pe.a,{className:"g-2 mt-2",children:[Object(Q.jsx)(he.a,{md:6,lg:8,children:Object(Q.jsx)(Se.a,{controlId:"asin",label:"Product name or asin",children:Object(Q.jsx)(we.a.Control,{placeholder:"...",onChange:function(e){return n(e.target.value)}})})}),Object(Q.jsx)(he.a,{md:3,lg:2,children:Object(Q.jsx)(Se.a,{label:"Select language",children:Object(Q.jsx)(we.a.Control,{as:"select",className:_e.a.select,onChange:function(e){return h(e.target.value)},children:Object(Q.jsx)("option",{value:"En",children:"En"})})})}),Object(Q.jsx)(he.a,{md:3,lg:2,children:Object(Q.jsx)(M.a,{type:"submit",variant:"primary",className:"w-100 h-100",disabled:S,children:"Search"})})]})}),Object(Q.jsxs)(pe.a,{className:"my-5",children:[Object(Q.jsx)(he.a,{md:4,children:Object(Q.jsx)("hr",{})}),Object(Q.jsx)(he.a,{md:4,className:"d-flex justify-content-center",children:Object(Q.jsx)("span",{className:"text-nowrap lead",children:f?"Most popular":"Search results"})}),Object(Q.jsx)(he.a,{md:4,children:Object(Q.jsx)("hr",{})})]}),_||S?Object(Q.jsx)(K,{children:Object(Q.jsx)(p.HashLoader,{})}):f?Object(Q.jsx)(ge,{popularProducts:P}):Object(Q.jsx)(Pe,{foundProducts:N})]})}},{path:B.ProductDetails,component:function(e){var t=e.match.params,r=t.asin,c=t.lang,n=g((function(e){return e.productDetails})),s=n.productDetails,u=n.productClusters,l=n.isDetailsLoading,o=n.isClustersLoading,d=n.detailsError,j=n.clustersError,b=U(),p=b.fetchProductDetails,h=b.fetchProductClusters;Object(a.useEffect)((function(){p({asin:r});var e=w.a.CancelToken.source();return h({cancelToken:e.token,asin:r,lang:c}),function(){return e.cancel()}}),[r,c]);var O=!l&&(null===s||void 0===s?void 0:s.variants)&&s.variants.length>1;return Object(Q.jsxs)(i.a,{className:"pb-5",children:[Object(Q.jsxs)(pe.a,{className:"g-4 mt-3",children:[Object(Q.jsx)(he.a,{md:5,lg:3,children:Object(Q.jsx)(se,{details:s,isLoading:l,error:d})}),Object(Q.jsx)(he.a,{md:7,lg:9,children:Object(Q.jsx)(be,{clusters:u,isLoading:o,error:j})})]}),O&&Object(Q.jsx)(Oe,{details:s})]})}}],Le=function(e,t){return Object.entries(t).reduce((function(e,t){var r=Object(l.a)(t,2),a=r[0],c=r[1];return e.replace(":".concat(a),c)}),e)},De=function(){return Object(Q.jsx)(s.a,{bg:"dark",variant:"dark",expand:"sm",children:Object(Q.jsxs)(i.a,{children:[Object(Q.jsx)(s.a.Brand,{as:u.b,to:B.Home,children:"Short Sentences"}),Object(Q.jsx)(s.a.Toggle,{}),Object(Q.jsx)(s.a.Collapse,{className:"justify-content-end",children:Object(Q.jsxs)(s.a.Text,{children:["Using public ",Object(Q.jsx)("b",{children:"Amazon API"})]})})]})})},Ee=function(e){var t=e.children;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(De,{}),t]})},Ce=function(){return Object(Q.jsx)(u.a,{basename:"/",children:Object(Q.jsx)(b.c,{children:ke.map((function(e,t){return Object(Q.jsx)(b.a,{exact:!0,path:e.path,render:function(t){var r=e.component;return Object(Q.jsx)(Ee,{children:Object(Q.jsx)(r,Object(y.a)({},t))})}},t)}))})})};n.a.render(Object(Q.jsx)(f.a,{store:V,children:Object(Q.jsx)(Ce,{})}),document.getElementById("root"))},42:function(e,t,r){e.exports={starWrapper:"RatingBlock_starWrapper__3g6mB",filled:"RatingBlock_filled__1EPlk",ratingWrapper:"RatingBlock_ratingWrapper__2DfNs",rating:"RatingBlock_rating__3Vf8B"}},47:function(e,t,r){e.exports={card:"ClusterDetails_card__2rJ2E",cardHeader:"ClusterDetails_cardHeader__39RZa",focused:"ClusterDetails_focused__2gfxo"}},63:function(e,t,r){e.exports={cardGroup:"ProductsPopular_cardGroup__IFBf5",card:"ProductsPopular_card__20fIV"}},64:function(e,t,r){e.exports={container:"Home_container__2mBc-",select:"Home_select__3upMm",invalidTooltip:"Home_invalidTooltip__2VyY-"}},82:function(e,t,r){e.exports={searchRow:"ProductsSearch_searchRow__5s3Gr"}},90:function(e,t,r){}},[[142,1,2]]]);
//# sourceMappingURL=main.47846626.chunk.js.map